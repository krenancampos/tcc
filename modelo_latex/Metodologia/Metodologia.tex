\chapter{Metodologia e Revisão Bibliográfica}

Neste capítulo, você deve apresentar uma breve revisão bibliográfica sobre as técnicas utilizadas para solução do problema.


Ao longo do tempo, diversas técnicas e abordagens foram desenvolvidas e aplicadas ao problema de ASS, levando a diferentes linhas de pesquisa em que todas têm em comum a aplicação em maior ou menor grau de conceitos e ferramentas de processamento de sinais, modelagem de fontes de áudio como fonte-filtro, álgebra linear, probabilidade e estatística \cite{rafii18}. Além disso, sinais de áudio multicanais (como áudio estéreo, surround 5.1, surround 7.1) demandam técnicas diferentes daquelas utilizadas em sinais que possuem apenas um canal (áudio mono), contribuindo ainda mais para a diversidade de linhas de pesquisa.

\section{Blind Source Separation e Análise de Componentes Independentes}
Historicamente, as primeiras abordagens para tratar o problema partiram de simplificações da teoria de sinais e sistemas dinâmicos lineares em que a partir de um número conhecido F de fontes e um número conhecido S de sensores (microfones), os sinais captados por cada microfone no domínio do tempo poderiam ser representados a partir da convolução entre o sinal de cada fonte e a resposta ao impulso do sistema composto pela agregação dos efeitos de propagação e interferência agindo entre cada fonte e o sinal captado pelo sensor (como a reverberação do ambiente de gravação, interferências de outras fontes, filtros dos circuitos eletrônicos dos sensores, etc.). Como pode-se notar, ainda que simplificações na forma da premissa de o número de fontes ser conhecido e o fato deste tipo de modelo de respostas ao impulso considerar que as fontes são pontuais e estacionárias [7], a identificação e modelagem do sistema dinâmico através das respostas ao impulso não é uma tarefa trivial e geralmente sequer possível, portanto, foram necessárias simplificações adicionais deste problema como a consideração da escassez de informação sobre as fontes e sobre o processo de mistura no que é conhecido na literatura como Blind Source Separation (BSS) [8] e [9], na qual a técnica de Análise de Componentes Independentes (Independent Component Analysis - ICA) é uma das mais exploradas até hoje. 

A ICA faz uma série de suposições simplificadoras, dentre elas que as fontes são estatisticamente independentes, que a mistura pode ser modelada como uma simples combinação linear dos sinais da fonte (ou seja, a mistura é apenas instantânea e efeitos de convolução não são modelados), além de que a solução do sistema linear formado pode ser obtida apenas quando há um número de microfones igual ou maior do que o número de fontes (S >= F). A formalização matemática da ICA assim como melhorias do método visando resolver as limitações de número de fontes, efeitos de convolução e não-linearidades do processo de mistura são exploradas em [10] dado que os sinais de áudio de forma geral não atendem às restrições impostas pela técnica, por exemplo o fato da maioria ser no formato mono ou estéreo e possuir mais do que duas fontes sonoras.

\section{Máscaras Espectrais}
Outra abordagem derivada diretamente da teoria de processamento de sinais consiste na filtragem do sinal misturado, isto é, realizar uma espécie de equalização na mistura atenuando ou amplificando determinadas frequências assumindo que diferentes fontes apresentam características e regiões espectrais diferentes, porém, como o sinal de áudio muda ao longo do tempo, é necessário que esta equalização também mude de forma correspondente, portanto, de forma a obter este efeito, utilizam-se máscaras espectrais que consistem em filtros cujas características são variantes no tempo [11], portanto, as máscaras espectrais operam tanto no domínio da frequência quanto no domínio do tempo simultaneamente, logo, sua aplicação se dá numa representação Tempo-Frequência do sinal como o espectrograma do sinal misturado. Uma breve explicação do espectrograma é feita no capítulo de fundamentos teóricos.

--------------- 

\textbf{Trecho do capítulo de fundamentos teóricos explicando o espectrograma}

O espectrograma é uma representação de como o espectro de frequências do sinal varia ao longo do tempo obtido através da transformada de Fourier (TF) de tempo curto (STFT), onde definem-se intervalos de tempo (janelas/bins) nos quais serão realizados a TF de forma sucessiva ao longo da duração do sinal. O espectrograma é obtido a partir da magnitude da TF para cada intervalo de tempo, como ilustrado na figura [REF.], onde o eixo vertical corresponde às frequências, o eixo horizontal ao tempo e a cor de cada ponto a intensidade/magnitude da TF naquela frequência naquela janela de tempo.

------------------

Existem diversas técnicas para obter máscaras espectrais de acordo com as características do sinal (como o número de canais) e premissas sobre as fontes misturadas (como o número de fontes, a distribuição espectral de cada uma, etc.) e a separação é obtida através da multiplicação matricial da máscara pela representação tempo-frequência do sinal.
Para o caso em que há apenas um canal, a máscara espectral é geralmente representada como uma matriz de valores reais entre 0 e 1. Além disso, elas podem ser classificadas de acordo com os valores que podem assumir, como as máscaras binárias que são restritas apenas aos valores 0 e 1 (i.e., de forma discreta) e que são aplicadas em problemas de separação de fala [12], enquanto as máscaras que podem assumir qualquer valor real entre 0 e 1 são classificadas como soft-masks ou ratio-masks e apresentam desempenho superior às máscaras binárias como demonstrado nos estudos [13] e [14] em que a separação obtida apresenta uma melhor relação sinal-ruído (SNR). Já quando o sinal é multicanal, dificuldades adicionais como a diferença de tempo entre os sinais da mesma fonte em cada canal devem ser levadas em conta e como consequência as máscaras espectrais passam a ser representadas como matrizes de valores complexos de forma a modelar a diferença de fase entre os sinais.

\section{Modelagem Fonte-Filtro}
Outra abordagem envolve a modelagem das diferentes fontes de áudio a partir do modelo fonte-filtro constituído por um sinal de excitação (a fonte) que é alterado por um filtro que representa alguma característica do meio ou instrumento. A alteração do sinal pelo filtro se dá pela mudança do envelope espectral do sinal. Esta abordagem é muito utilizada na modelagem de voz como em [15], onde a fonte do sinal de excitação corresponde aos pulsos glotais gerados pelas cordas vocais e o filtro corresponde ao trato vocal.

Outra possibilidade é a modelagem tanto de melodias cantadas por vozes quanto de instrumentos afinados dado que em teoria musical as notas são determinadas por frequências específicas (chamadas de frequências fundamentais) e o timbre dos instrumentos é derivado do envelope espectral dos harmônicos que são múltiplos inteiros da frequência fundamental, logo, pode-se modelar a fonte como o sinal senoidal puro com a frequência fundamental e o timbre através do filtro. Além disso, esta modelagem é facilitada dado que geralmente apenas um conjunto reduzido de notas ocorrem em cada música por causa de conceitos de teoria musical como escala, tom, campo harmônico, etc.

O modelo fonte-filtro e as considerações sobre a característica harmônica de instrumentos e melodias cantadas necessitam de métodos de identificação da frequência fundamental assim como a sua correspondente variação ao longo do tempo para extração das melodias. Estes métodos em conjunto com o modelo fonte-filtro foram explorados em trabalhos como em [16] onde após realizar a identificação das frequências fundamentais ao longo da melodia através da STFT, realizou-se a sintetização das fontes através do modelo fonte-filtro de cada uma. Abordagem similar foi utilizada no trabalho [17] de forma a separar sinais musicais de voz acompanhada de piano. Porém os resultados obtidos pela sintetização a partir do modelo fonte-filtro e da harmonicidade sofrem do problema de soarem artificiais pela característica metalizada, como discutido em [6], decorrente das diferenças entre os sinais de excitação estimados para as fontes e os sinais reais, o que expõe a sensibilidade destes métodos à qualidade do modelo fonte-filtro e à qualidade de extração da melodia o que impede a aplicação em gravações que fogem das condições ideais que o método exige. Além disso, nem todos instrumentos podem ser modelados como harmônicos, como é o caso de instrumentos percussivos, demandando portanto novas abordagens.

\section{Fatoração e Co-Fatoração de Matrizes Não-Negativas}
De forma a atacar as limitações dos métodos harmônicos com modelo fonte-filtro, outras abordagens passaram a considerar a natureza repetitiva de sinais musicais, como as repetições rítmicas, as repetições de notas em escalas, as de acordes na progressão harmônica e as repetições de estruturas musicais como versos e refrões presentes em músicas populares. Essas repetições podem ser modeladas como um conjunto de estruturas básicas (features) que aparecem e são combinadas em determinados momentos, no caso de sinais musicais isso corresponde a considerar que o espectrograma da mistura pode ser decomposto em poucos espectrogramas bases que são ativados e combinados ao longo do tempo, sendo este o fundamento do algoritmo de fatoração de matrizes não-negativas (Non-negative Matrix Factorization - NMF) [18] em que uma matriz de valores não-negativos é decomposta como o produto entre outras duas matrizes também não negativas, sendo que o algoritmo é explicado com mais detalhes no capítulo de fundamentos teóricos. O algoritmo de NMF foi aplicado em sinais musicais em [19] e [20], porém como o algoritmo não garante unicidade de soluções e por ser um caso especial de BSS, a interpretação da separação em instrumentos é prejudicada além do fato de que por ser um algoritmo de aproximação por ?low-rank?, ele não é adequado para vocais e instrumentos que apresentam menos repetições. De forma a atacar estes problemas, uma variação do algoritmo chamada de co-fatoração de matrizes não-negativas visa realizar a fatoração conjunta da matriz alvo (o espectrograma) e uma matriz contendo informação adicional como melodias, vocais e acompanhamento quando disponíveis de forma que a fatoração obtida apresenta componentes compartilhadas com as matrizes de informação, como mostrado pelos resultados em [21] e [22] para o caso de instrumentos percussivos e em [23] para vocais.

\section{Redes Neurais Artificias}
Atualmente as abordagens que têm produzido resultados mais promissores e superiores aos métodos já explorados são aquelas baseadas em aprendizado de máquina como redes neurais artificiais, dada a disponibilidade atual do grande volume de dados para treinamento. Como os métodos discutidos acima são baseados sempre em alguma espécie de modelagem que exigem determinadas suposições que quando não satisfeitas produzem resultados insatisfatórios, as abordagens por aprendizado de máquina se destacam pela ausência destas suposições, onde o modelo é obtido pelo treinamento a partir dos exemplos. A primeira aplicação das redes neurais em ASS se deu em [24] com o emprego de redes neurais recorrentes (Recurrent Neural Networks - RNN). Já em [25], redes neurais convolucionais (Convolutional Neural Networks - CNN) foram utilizadas para extração de vocais. Em [26], os autores aplicaram redes neurais feedforward (Feedforward Neural Networks - FNN) para separação de instrumentos e re-mixagem de músicas de Jazz.

Os trabalhos mais recentes buscam associar redes neurais profundas com técnicas dos modelos descritos neste capítulo, aumentando assim o desempenho destes algoritmos, como em [27] que na saída de uma RNN foi inserida uma camada extra de uma máscara espectral usada para gerar os espectros das fontes separadas e portanto o processo de aprendizado aproxima de forma indireta a máscara espectral ideal que produz a melhor separação, onde os resultados obtidos superaram os algoritmos estado da arte em separação de voz.

Os problemas associados com o emprego de redes neurais são o custo computacional no treinamento dos algoritmos e a necessidade de uma grande base de dados para treinamento, além da dificuldade de interpretação dos milhares de parâmetros dos modelos que estas redes geram [6].


\section{Técnica 1}
\markright{\thesection ~~~ Metodologia}
\label{metodo}

Aqui você encontra um exemplo de inserção de figura. Veja o arquivo DescricaoProjeto.tex para ver os comandos.
\begin{figure}[!htbp]
	\centering		
	\includegraphics[bb =0 0 264  221]{Resultados/Figuras/ciclodesenvolvimento.eps}
	\caption{figuara teste}
	\label{fig:ciclodesenvolvimento}
\end{figure}

A figura \ref{fig:ciclodesenvolvimento} tal aparece.

\begin{table}
	\centering
		\begin{tabular}{c|c}
			1 & 2 \\
			1 & 2 \\
			1 & 2 \\
			1 & 2 \\
			1 & 2 \\			
		\end{tabular}
\end{table}


\begin{figure}[htbp]
\centering
\includegraphics[scale=1.2]{Metodologia/Figuras/ciclodesenvolvimento.eps}
\caption{Ciclo de desenvolvimento de um projeto.}
\label{CicloDesenvolvimento1}
\end{figure}

Para referenciar a Figura \ref{CicloDesenvolvimento1}, veja arquivo .tex.

\begin{equation}\label{eq:forca}
	f=ma
\end{equation}

A equação \ref{eq:forca}
\section{Técnica 2}
\markright{\thesection ~~~ Metodologia}
\label{metodo1a}

\section{Resumo do Capítulo}
\markright{\thesection ~~~ Metodologia}
\label{metodo1b}




\clearpage